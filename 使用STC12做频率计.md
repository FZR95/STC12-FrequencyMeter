# 使用STC12制作频率计

## 1. 1602液晶配置

## 2. 关于定时器
- ### TMOD-定时器工作模式
|7		|6	|5	|4	|3		|2	|1	|0	|
|--		|--	|--	|--	|--		|--	|--	|--	|
|GATE	|C/T|M1	|M0	|GATE	|C/T|M1	|M0	|    

  ***GATE*** : 1-仅在INT0脚为高及TR0控制位置1时才可以打开定时器  
  ***C/T*** : 0-用作定时器（内部时钟）；1-用作计数器（T1或P3^5引入）  
  ***M1 M0*** : 00--13位（TL1仅低五位）；01--16位；10--8位自动重装；11--停止计数  
  
- ### TCON-定时器控制寄存器
|7	|6	|5	|4	|3	|2	|1	|0	|
|--	|--	|--	|--	|--	|--	|--	|--	|
|TF1|TR1|TF0|TR0|IE1|IT1|IE0|IT0|

 ***TF*** : TimerFull 定时器/计时器溢出标志  
 ***TR*** : TimerRun 定时器运行控制位 与GATE联动  
 ***IE*** : InterruptEnable 外部中断向CPU请求中断，CPU响应后清0  
 ***IT*** : InterruptTrigger 外部中断触发方式 0--INT(P3^3)输入为低电平触发 
- ### AUXR-辅助寄存器
|7		|6		|5			|4		|3		|2		|1		|0		|
|--		|--		|--			|--		|--		|--		|--		|--		|
|TOx12	|TIx12	|UART_MOx6	|BRTR	|S2SMOD	| BKTx12|EXTRAM	|SIBRS	|

 ***T0x12*** : 定时器速度控制位 0--12分频 1--不分频
 
## 3.  定时器配置
采用32.768MHz的晶振，因此使用模式1,16位定时器，计数器使用1T模式。

![16位定时器](./16位定时器.jpg)

*定时器计算：*  
1ms: 65536 - FOSC/分频/1000;  
16位定时器即: 2^16 = 65536;
OSFC:OScillateFrequenCy  晶振频率 32768000;  
(对于此项：1000 0000 0000 0000)

得到1ms后用软件循环获得相应的时间

